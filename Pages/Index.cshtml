@page
@model IndexModel
@{
    ViewData["Title"] = "PostgreSQL Connection Details";
}

<div class="text-center">
    <h1 class="display-4">PostgreSQL Connection Details</h1>
    <p id="details">Loading connection details...</p>
</div>

@section Scripts {
    <script>
        // Fetch PostgreSQL connection details from the backend API
        fetch('/api/version')
            .then(response => response.json())
            .then(data => {
                const detailsElement = document.getElementById('details');
                if (data.currentUser) {
                    detailsElement.textContent = `Current User: ${data.currentUser}, Session User: ${data.sessionUser}, Client Address: ${data.clientAddress}, Client Port: ${data.clientPort}`;
                } else {
                    detailsElement.textContent = 'Failed to fetch connection details.';
                }
            })
            .catch(error => {
                console.error('Error fetching connection details:', error);
                document.getElementById('details').textContent = 'Error fetching connection details.';
            });
    </script>
}
